var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},CZ;(function(n){(function(t){var i=function(t){function i(i,r){var u,e,f;t.call(this,i,r);u=$("#existingTimeSeries");u.children().length==0&&($.ajax({cache:!1,type:"GET",async:!1,dataType:"JSON",url:"/dumps/timeseries-preloaded.txt",success:function(n){e=n.d},error:function(n){alert("Error fetching pre-loaded time series chart: "+n.responseText)}}),e.forEach(function(t){var i=$("<li><\/li>").css("margin-left",10).css("margin-bottom","3px").height(22).appendTo(u),f=$("<a><\/a>").addClass("cz-form-preloadedrecord").appendTo(i),e,r;f.text(t.name);e=$("<span><\/span>").addClass("cz-form-preloadedrecord").appendTo(i);e.text("Source:");r=$("<a><\/a>").addClass("cz-form-preloadedrecord time-series-link").appendTo(i);r.text(t.source);r.prop("href",t.link);f.click(function(){var r,i,u;$.ajax({cache:!1,type:"GET",async:!1,dataType:"text",url:t.file,success:function(n){r=n},error:function(n){alert("Error fetching time series data: "+n.responseText)}});i=undefined;try{i=n.Data.csvToDataSet(r,t.delimiter,t.source)}catch(f){alert(f);return}n.HomePageViewModel.showTimeSeriesChart();n.rightDataSet=i;u=n.Common.vc.virtualCanvas("getViewport");n.HomePageViewModel.updateTimeSeriesChart(u)})}));this.input=$("#fileLoader");f=this;$("#fileLoader").change(function(){var n=$("#fileLoader");$("#selectedFile").text(n[0].files[0].name)});this.checkFileLoadCompatibility()?$("#loadDataBtn").click(function(){var n=f.openFile({onload:function(){f.updateUserData(n.result)}})}):$("#uploadDataCnt").hide()}return __extends(i,t),i.prototype.show=function(){t.prototype.show.call(this,{effect:"slide",direction:"right",duration:500});this.activationSource.addClass("active")},i.prototype.close=function(){t.prototype.close.call(this,{effect:"slide",direction:"right",duration:500});this.activationSource.removeClass("active")},i.prototype.checkFileLoadCompatibility=function(){return window.File&&window.FileReader&&window.FileList&&window.Blob},i.prototype.openFile=function(n){var i=this.input[0].files[0],t=new FileReader;return t.onloadstart=n.onloadstart,t.onerror=n.onerror,t.onabort=n.onabort,t.onload=n.onload,t.onloadend=n.onloadend,t.readAsText(i),t},i.prototype.updateUserData=function(t){var r=undefined,i=$("#delim").prop("value"),u;i==="tab"?i="\t":i==="space"&&(i=" ");try{r=n.Data.csvToDataSet(t,i,this.input[0].files[0].name)}catch(f){alert(f);return}n.HomePageViewModel.showTimeSeriesChart();n.leftDataSet=r;u=n.Common.vc.virtualCanvas("getViewport");n.HomePageViewModel.updateTimeSeriesChart(u)},i}(n.UI.FormBase);t.TimeSeriesDataForm=i})(n.UI||(n.UI={}));var t=n.UI})(CZ||(CZ={}));
//# sourceMappingURL=timeseries-data-form.min.js.map
