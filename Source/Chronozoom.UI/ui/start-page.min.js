var CZ;(function(n){(function(t){function i(n,t,i){var f=$("#start-page"),r=n.parent().width(),u=n.parent().height();i&&(r=n.width(),u=n.height());f.is(":visible")||(f.show(),r=n.width(),u=n.height(),f.hide());var e=t.naturalHeight,o=t.naturalWidth,s=o/e,h=0,c=0;o>e?(n.height(u),n.width(u*s),c=(n.width()-r)/2):o<e?(n.width(r),n.height(r/s),h=(n.height()-u)/2):(n.width(r),n.height(u));n.css({"margin-top":-h+"px","margin-left":-c+"px"})}function v(n,i,r){for(var f,u=0;u<i[r].Visibility.length;u++)f=$(n).clone(!0,!0).appendTo(i[r].Name),f.attr("class",i[r].Visibility[u]),f.attr("id","t"+r+"i"+u),$("#t"+r+"i"+u+" .boxInner .tile-photo img").attr("src",t.tileData[u].Thumbnail).attr("alt",t.tileData[u].Title),$("#t"+r+"i"+u+" .boxInner .tile-meta .tile-meta-title").text(t.tileData[u].Title),$("#t"+r+"i"+u+" .boxInner .tile-meta .tile-meta-author").text(t.tileData[u].Author)}function y(n,i,r){for(var f,u=0;u<t.tileData.length;u++)f=$(n).clone(!0,!0).appendTo(i),f.attr("id","l"+r+"i"+u),$("#l"+r+"i"+u+" .li-title a").attr("href",t.tileData[u].URL),$("#l"+r+"i"+u+" .li-title a").text(t.tileData[u].Title),$("#l"+r+"i"+u+" .li-author").text(t.tileData[u].Author),$("#l"+r+"i"+u+" .li-icon").text(t.tileData[u].Thumbnail)}function p(n,t,i){for(var u,r=0;r<t[i].Visibility.length;r++)u=$(n).clone(!0,!0).appendTo(t[i].Name),u.attr("class",t[i].Visibility[r]),u.attr("id","m"+i+"i"+r)}function w(){var t=n.Tours.tours[0];if(typeof t=="undefined")return!1;n.Tours.tourCaptionForm=new n.UI.FormTourCaption(n.Tours.tourCaptionFormContainer,{activationSource:$(),navButton:".cz-form-nav",closeButton:".cz-tour-form-close-btn > .cz-form-btn",titleTextblock:".cz-tour-form-title",contentContainer:".cz-form-content",minButton:".cz-tour-form-min-btn > .cz-form-btn",captionTextarea:".cz-form-tour-caption",tourPlayerContainer:".cz-form-tour-player",bookmarksCount:".cz-form-tour-bookmarks-count",narrationToggle:".cz-toggle-narration",context:t});n.Tours.tourCaptionForm.show();n.Tours.activateTour(t,undefined)}function b(){var t,i;if(n.Authoring.hideMessageWindow(),t=prompt("What name would you like for your new collection?\nNote: The name must be unique among your collections.","")||"",t=$.trim(t),i=t.replace(/[^a-zA-Z0-9]/g,""),i!==""){if(i.length>50){n.Authoring.showMessageWindow("The name of your new collection must be no more than 50 characters in length.","Unable to Create Collection");return}n.Service.getCollection().done(function(r){n.Service.isUniqueCollectionName(t).done(function(u){if(!u||i===r.Path){n.Authoring.showMessageWindow("Sorry your new collection name is not unique enough. Please try a different name.","Unable to Create Collection");return}n.Service.postCollection(i,{Title:t}).done(function(t){t?window.location=(window.location.protocol+"//"+window.location.host+"/"+n.Service.superCollectionName+"/"+i).toLowerCase():n.Authoring.showMessageWindow("An unexpected error occured.","Unable to Create Collection")})})})}}function k(n){"block"!=document.getElementById(n+"-list").style.display?(document.getElementById(n+"-list").style.display="block",document.getElementById(n+"-tiles").style.display="none",$("#"+n).find(".list-view-icon").addClass("active")):(document.getElementById(n+"-list").style.display="none",document.getElementById(n+"-tiles").style.display="block",$("#"+n).find(".list-view-icon").removeClass("active"),$(window).resize())}function f(t){for(var s=$("#template-tile .box"),o=n.StartPage.tileLayout[1],u=0,h=Math.min(o.Visibility.length,t.length);u<h;u++){var f=t[u],c=f.TimelineUrl,y=$("#start-page"),e=s.clone(!0,!0),l=e.find(".boxInner .tile-photo img"),a=e.find(".boxInner .tile-meta .tile-meta-title"),v=e.find(".boxInner .tile-meta .tile-meta-author");e.appendTo(o.Name).addClass(o.Visibility[u]).attr("id","featured"+u).click(c,function(n){window.location.href=n.data;r()}).invisible();l.load(e,function(n){var t=$(this),r=n.target||n.srcElement;i(t,r);$(window).resize({$image:t,imageProps:r},function(n){i(n.data.$image,n.data.imageProps)});setTimeout(function(){n.data.visible()},0)}).attr({src:f.ImageUrl,alt:f.Title});a.text(f.Title.trim()||"No title :(");v.text(f.Author)}}function e(n){for(var u=0;u<Math.min(t.tileData.length,n.length);u++){var f=n[u],s=f.TimelineUrl,e=$("#template-timeline-list .timeline-list-item").clone(!0,!0).appendTo("#FeaturedTimelinesBlock-list"),o=e.find(".timeline-li-image img"),h="featured-list-elem"+u;e.attr("id","l1i"+u);e.click(s,function(n){window.location.href=n.data;r()});e.attr("data-title",f.Title.trim()||"No title :(");e.attr("data-author",f.Author);o.load(o,function(n){var t=$(this),r=n.target||n.srcElement;i(t,r,!0)}).attr({src:f.ImageUrl,alt:f.Title})}}function o(t){for(var s=$("#template-tile .box"),o=n.StartPage.tileLayout[3],u=0,h=Math.min(o.Visibility.length,t.length);u<h;u++){var f=t[u],c=f.TimelineUrl,y=$("#start-page"),e=s.clone(!0,!0),l=e.find(".boxInner .tile-photo img"),a=e.find(".boxInner .tile-meta .tile-meta-title"),v=e.find(".boxInner .tile-meta .tile-meta-author");e.appendTo(o.Name).addClass(o.Visibility[u]).attr("id","favorite"+u).click(c,function(n){window.location.href=n.data;r()}).invisible();l.load(e,function(n){var t=$(this),r=n.target||n.srcElement;i(t,r);$(window).resize({$image:t,imageProps:r},function(n){i(n.data.$image,n.data.imageProps)});setTimeout(function(){n.data.visible()},0)}).attr({src:f.ImageUrl,alt:f.Title});a.text(f.Title.trim()||"No title :(");v.text(f.Author)}}function s(n){for(var u=0;u<Math.min(t.tileData.length,n.length);u++){var f=n[u],s=f.TimelineUrl,e=$("#template-timeline-list .timeline-list-item").clone(!0,!0).appendTo("#FavoriteTimelinesBlock-list"),o=e.find(".timeline-li-image img"),h="favorite-list-elem"+u;e.attr("id","lfav1i"+u);e.click(s,function(n){window.location.href=n.data;r()});e.attr("data-title",f.Title.trim()||"No title :(");e.attr("data-author",f.Author);o.load(o,function(n){var t=$(this),r=n.target||n.srcElement;i(t,r,!0)}).attr({src:f.ImageUrl,alt:f.Title})}}function h(t){for(var h=$("#template-tile .box"),s=n.StartPage.tileLayout[4],u=0,c=Math.min(s.Visibility.length,t.length);u<c;u++){var f=t[u],l=f.TimelineUrl,y=$("#start-page"),e=h.clone(!0,!0),o=e.find(".boxInner .tile-photo img"),a=e.find(".boxInner .tile-meta .tile-meta-title"),v=e.find(".boxInner .tile-meta .tile-meta-author");e.appendTo(s.Name).addClass(s.Visibility[u]).attr("id","my"+u).click(l,function(n){window.location.href=n.data;r()}).invisible();o.load(e,function(n){var r=$(this),t;o.show();t=n.target||n.srcElement;o.hide();i(r,t);o.show();$(window).resize({$image:r,imageProps:t},function(n){i(n.data.$image,n.data.imageProps)});setTimeout(function(){n.data.visible()},0)}).attr({src:f.ImageUrl,alt:f.Title});a.text(f.Title.trim()||"No title :(");v.text(f.Author)}}function c(n){for(var u=0;u<Math.min(t.tileData.length,n.length);u++){var f=n[u],s=f.TimelineUrl,e=$("#template-timeline-list .timeline-list-item").clone(!0,!0).appendTo("#MyTimelinesBlock-list"),o=e.find(".timeline-li-image img"),h="favorite-list-elem"+u;e.attr("id","lmy1i"+u);e.click(s,function(n){window.location.href=n.data;r()});e.attr("data-title",f.Title.trim()||"No title :(");e.attr("data-author",f.Author);o.load(o,function(n){var t=$(this),r=n.target||n.srcElement;i(t,r,!0)}).attr({src:f.ImageUrl,alt:f.Title})}}function d(){var t=window.location.href.replace("//","").toLowerCase().split("/");n.StartPage.hide();t[1]=="#"?$("#regime-link-cosmos").trigger("click"):window.location.href="/#/cosmos"}function g(t,i){var r="#template-tweet-list .tweet-list-item",u="#TwitterBlock-list";n.Service.getRecentTweets().done(function(n){for(var t=0,l=n.d.length;t<l;++t){var e=n.d[t],o=e.Text,a=e.User.Name,h=e.User.ScreenName,v=e.User.ProfileImageUrl,k=e.CreatedDate,c=new Date(k.match(/\d+/)[0]*1),y=c.getDate()+"."+c.getMonth()+"."+c.getFullYear(),p="https://twitter.com/"+h,w="https://twitter.com/"+h+"/statuses/"+e.IdStr,d=$("#m"+i+"i"+t),f=d.find(".boxInner .tweet-meta"),g=f.find(".tweet-meta-text"),nt=f.find(".tweet-meta-title"),tt=f.find(".tweet-meta-author"),b=f.find(".tweet-avatar-icon"),it=f.find(".tile-meta-time");f.invisible(!0);b.load(f,function(n){n.data.visible()});o=o.replace(/(@([A-Za-z0-9_]+))/gi,"<a class='tweet-message-link' target='blank'                         href='https://twitter.com/$2'>$1<\/a>");o=o.replace(/(#([A-Za-z0-9_]+))/gi,"<a class='tweet-message-link' target='blank'                         href='https://twitter.com/search?q=$2&f=realtime'>$1<\/a>");g.html(o).attr("href",w);tt.text("@"+h).attr("href",p);nt.text(a);it.text(y);b.attr("src",v);var s=$(r).clone(!0,!0).appendTo(u),rt=s.find(".tweet-li-message"),ut=s.find(".tweet-li-header .tweet-li-username"),ft=s.find(".tweet-li-header .tweet-li-fullname"),et=s.find(".tweet-li-header .tweet-li-avatar"),ot=s.find(".tweet-li-footer .tweet-li-date");s.attr("id","l"+i+"i"+t);rt.html(o).attr("href",w);ut.text("@"+h).attr("href",p);ft.text(a);ot.text(y);et.attr("src",v);$("#m"+i+"i"+t+" .boxInner .tweet-meta .tweet-meta-text").dotdotdot({watch:"window"})}})}function l(t){$(".header-regimes").invisible();$(".header-breadcrumbs").invisible();n.HomePageViewModel.closeAllForms();tt(t);$("#start-page").fadeIn()}function a(n,t){return n.Title.charAt(0)<t.Title.charAt(0)?-1:n.Title.charAt(0)>t.Title.charAt(0)?1:0}function r(){u&&$(".header-regimes").visible();$(".header-breadcrumbs").visible();$("#start-page").fadeOut()}function nt(){u=$(".header-regimes").is(":visible");n.Service.getUserFeatured().done(function(n){var t=n?n.reverse():[];t.sort(a);f(t);e(t)});n.Service.getUserFavorites().then(function(t){var i=t?t.reverse():[];i.sort(a);i.forEach(function(t){n.Settings.favoriteTimelines.push(t.TimelineUrl.split("/").pop().slice(1))});i.length===0?($("#FavoriteTimelinesBlock .list-view-icon").hide(),$("#FavoriteTimelinesBlock-tiles").text("You don't have any favorite timelines yet. Click star icon of the timeline you like to save it as favorite.")):(o(i),s(i))},function(){console.log("[ERROR] getUserFavorites")});n.Service.getProfile().done(function(t){t!==""&&t.DisplayName!==null&&(n.Settings.userSuperCollectionName=t.DisplayName,n.Settings.userCollectionName=t.DisplayName);n.Service.getEditableCollections(!0).then(function(n){var t=n?n:[];h(t);c(t)},function(){console.log("[ERROR] getEditableCollections")})});n.StartPage.cloneTweetTemplate("#template-tweet .box",n.StartPage.tileLayout,2);n.StartPage.TwitterLayout(n.StartPage.tileLayout,2);var t=n.UrlNav.getURL().hash;t.path&&(t.path!=="/t"+n.Settings.guidEmpty||t.params)||n.Service.superCollectionName||l()}function tt(t){(t||!n.Settings.isCosmosCollection)&&(n.Authoring.isEnabled||n.Settings.isAuthorized)?($("#WelcomeBlock").attr("data-toggle","hide"),$("#MyTimelinesBlock").attr("data-toggle","show"),$("#FavoriteTimelinesBlock").attr("data-toggle","hide"),$("#TwitterBlock").attr("data-toggle","show")):($("#WelcomeBlock").attr("data-toggle","show"),$("#MyTimelinesBlock").attr("data-toggle","hide"),$("#FavoriteTimelinesBlock").attr("data-toggle","hide"),$("#TwitterBlock").attr("data-toggle","show"))}var u;t.tileData=[{Idx:0,Title:"Big History is my favorite course ever",Thumbnail:"../images/dummy/tile_bighistory.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.4999999998954347&y=-0.46459331778482354&w=3.841695822797034e-12&h=3.7430627449314544e-12"},{Idx:1,Title:"CERN is my favorite course ever",Thumbnail:"../images/dummy/tile_cern.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.49999999192440875&y=-0.4645933209201501&w=3.729306137185042e-11&h=3.633558592459924e-11"},{Idx:2,Title:"Earth Science is my favorite course ever",Thumbnail:"../images/dummy/tile_earthscience.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.49999999988061194&y=-0.46459331795948755&w=4.546120315559252e-12&h=4.4294015903520115e-12"},{Idx:3,Title:"King Tut is my favorite course ever",Thumbnail:"../images/dummy/tile_kingtut.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.49999967062717304&y=-0.4645931999741229&w=3.5221148563086766e-10&h=3.4316868149181225e-10"},{Idx:4,Title:"Napoleon is my favorite course ever",Thumbnail:"../images/dummy/tile_napoleon.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.4999999840411981&y=-0.46459346560505227&w=5.935054278147061e-10&h=5.782675563705605e-10"},{Idx:5,Title:"World War I is my favorite course ever",Thumbnail:"../images/dummy/tile_ww1.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.49999999485392826&y=-0.4645933221621095&w=3.314938789411939e-12&h=3.229829860746773e-12"},{Idx:6,Title:"Coluseum is my favorite course ever",Thumbnail:"../images/dummy/tile_colosseum.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.49999988732590944&y=-0.4645934478931077&w=1.0069124184819225e-9&h=9.810605875309654e-10"},{Idx:7,Title:"Justin Morrill is my favorite course ever",Thumbnail:"../images/dummy/tile_justin_morrill.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.4999999897945675&y=-0.46459338150077905&w=1.9362194151655837e-10&h=1.8865082227261387e-10"},{Idx:8,Title:"Big History 2 is my favorite course ever",Thumbnail:"../images/dummy/tile_bighistory.jpg",Author:"Some Author",URL:"http://www.chronozoom.com/#/t00000000-0000-0000-0000-000000000000@x=0.4996898109169686&y=-0.46442779133805834&w=0.0007080832576286593&h=0.0006899036738441856"}];t.tileLayout=[{Name:"#combo0-icons",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9"]},{Name:"#FeaturedTimelinesBlock-tiles",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9"]},{Name:"#TwitterBlock-tiles",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9"]},{Name:"#FavoriteTimelinesBlock-tiles",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6"]},{Name:"#MyTimelinesBlock-tiles",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9"]},{Name:"#OtherEditableTimelinesBlock-tiles",Visibility:["box","box","box ex3","box ex3 ex4","box ex3 ex4 ex6","box ex3 ex4 ex6","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9","box ex3 ex4 ex6 ex9"]}];t.cloneTileTemplate=v;t.cloneListTemplate=y;t.cloneTweetTemplate=p;t.PlayIntroTour=w;t.addCollection=b;t.listFlip=k;t.fillFeaturedTimelines=f;t.fillFeaturedTimelinesList=e;t.fillFavoriteTimelines=o;t.fillFavoriteTimelinesList=s;t.fillMyTimelines=h;t.fillMyTimelinesList=c;t.startExploring=d;t.TwitterLayout=g;t.show=l;t.hide=r;t.initialize=nt})(n.StartPage||(n.StartPage={}));var t=n.StartPage})(CZ||(CZ={}));
/*
//# sourceMappingURL=start-page.min.js.map
*/