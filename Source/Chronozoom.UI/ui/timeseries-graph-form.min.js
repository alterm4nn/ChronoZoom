var CZ;(function(n){(function(t){var i=function(){function t(t){this.container=t;this.canvas=document.createElement("canvas");$(this.canvas).prependTo($("#timeSeries"));this.canvas.width=t.width();this.canvas.height=t.height();this.context=this.canvas.getContext("2d");$("#closeTimeChartBtn").click(function(){n.HomePageViewModel.hideTimeSeriesChart()})}return t.prototype.calculateTicks=function(n,t,i){var k=(t-n)/i,e=Math.round(Math.log(k)/Math.LN10),o=Math.pow(10,e),f=k/o,r,u,b,y,p,s;f=f<1.5?1:f<3.5?2:5;var h=Math.ceil(n/(f*o)),c=Math.floor(t/(f*o)),l=c-h+1;if(l<i)for(;;){r=f;u=e;r==5?r=2:r==2?r=1:(u--,r=5);var a=Math.ceil(n/(r*Math.pow(10,u))),v=Math.floor(t/(r*Math.pow(10,u))),w=v-a+1;if(Math.abs(i-l)>Math.abs(i-w))h=a,c=v,f=r,e=u,o=Math.pow(10,u);else break}else if(l>i)for(;;){r=f;u=e;r==5?(r=1,u++):r=r==2?5:2;var a=Math.ceil(n/(r*Math.pow(10,u))),v=Math.floor(t/(r*Math.pow(10,u))),w=v-a+1;if(Math.abs(i-l)>Math.abs(i-w)&&w>0)h=a,c=v,f=r,e=u,o=Math.pow(10,u);else break}for(b=[],y=h;y<=c;y++)p=y*f*o,e<0&&(p=p.toPrecision(-e)),b.push(p);return s={},s.ticks=b,s.h=e,s.h10=o,s},t.prototype.clear=function(n,t){this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this.context.fillStyle="white";this.context.fillRect(n,0,t-n,this.canvas.height);var i=Math.max(24,(t-n)/2-60);$("#rightLegend").css("right",$("#timeSeries").width()-t+30);$("#rightLegend").css("max-width",i+"px");$("#leftLegend").css("left",n+30);$("#leftLegend").css("max-width",i+"px");$("#timeSeriesChartHeader").text("Time Series Chart")},t.prototype.drawDataSet=function(n,t,i,r,u,f,e,o){var v=this;n.series.forEach(function(n){n.appearanceSettings&&n.appearanceSettings.thickness&&n.appearanceSettings.thickness>r&&(r=n.appearanceSettings.thickness)});var k=this.canvas.height-2*r,p=function(n){return(n-u)/(f-u)*(i-t)+t},w=function(n){return r+k*(e-n)/(e-o)},y=n.time,b=y.length,s=this.context,h=t,c=i,l=0,a=this.canvas.height;n.series.forEach(function(n){var d,t,u,i,f,r,it,e,g,rt,ut,o,k,ft,et,nt,tt;for(s.strokeStyle=n.appearanceSettings.stroke,s.lineWidth=n.appearanceSettings.thickness,d=n.values,s.beginPath(),r=0,it=function(){for(;r<b;r++)if(!isNaN(y[r])&&!isNaN(d[r])){t=p(y[r]);i=w(d[r]);e=v.code(t,i,h,c,l,a);break}e==0&&s.moveTo(t,i)},it(),nt=1,r++;r<b;r++){if(isNaN(y[r])||isNaN(d[r])){nt==1?(s.stroke(),tt=v.code(t,i,h,c,l,a),tt==0&&(s.beginPath(),s.arc(t,i,n.appearanceSettings.thickness/2,0,2*Math.PI),s.fill())):s.stroke();s.beginPath();r++;it();nt=1;continue}if(ft=u=p(y[r]),et=f=w(d[r]),!(Math.abs(t-u)<1)||!(Math.abs(i-f)<1)){for(rt=e,ut=g=v.code(u,f,h,c,l,a);e|g;){if(e&g)break;o=u-t;k=f-i;e?(t<h?(i+=k*(h-t)/o,t=h):t>c?(i+=k*(c-t)/o,t=c):i<l?(t+=o*(l-i)/k,i=l):i>a&&(t+=o*(a-i)/k,i=a),e=v.code(t,i,h,c,l,a)):(u<h?(f+=k*(h-u)/o,u=h):u>c?(f+=k*(c-u)/o,u=c):f<l?(u+=o*(l-f)/k,f=l):f>a&&(u+=o*(a-f)/k,f=a),g=v.code(u,f,h,c,l,a))}e&g||(rt!=0&&s.moveTo(t,i),s.lineTo(u,f),nt++);t=ft;i=et;e=ut}}nt==1?(s.stroke(),tt=v.code(t,i,h,c,l,a),tt==0&&(s.beginPath(),s.arc(t,i,n.appearanceSettings.thickness/2,0,2*Math.PI),s.fill())):s.stroke()})},t.prototype.code=function(n,t,i,r,u,f){var e=n<i?1:0,o=n>r?1:0,s=t<u?1:0,h=t>f?1:0;return e<<3|o<<2|s<<1|h},t.prototype.generateAxisParameters=function(n,t,i,r,u){var y=this,h=[],s=u.verticalPadding?u.verticalPadding:0,c=this.canvas.height-2*s,a=function(n){return s+c*(r-n)/(r-i)},l=function(n){return(r-i)*(1-(n-s)/c)+i},v=this.calculateTicks(l(this.canvas.height),l(0),u.labelCount).ticks,f=this.context,e,o;return f.font=u.font,f.textBaseline="middle",f.strokeStyle=u.stroke,f.fillStyle=u.stroke,f.lineWidth=u.majorTickThickness,e=u.tickLength,o=2,u.axisLocation=="right"&&(e=-e,o=-o),f.textAlign=u.axisLocation,v.forEach(function(i){var r={},l,c,s;r.tick=i;l=a(i);r.y=l;r.xLineStart=n;r.xLineEnd=n+e;r.xText=n+e+o;c=f.measureText(i).width;u.axisLocation=="right"&&(c=-c);s=e+c+2*o;r.isGridLineVisible=s>0&&n+s<=t||s<0&&n+s>=t;r.xGridLineStart=n+s;r.xGridLineEnd=t;h.push(r)}),h},t.prototype.drawAxis=function(n,t){var r=this,i=this.context;i.font=t.font;i.textBaseline="middle";i.strokeStyle=t.stroke;i.fillStyle=t.stroke;i.lineWidth=t.majorTickThickness;i.textAlign=t.axisLocation;n.forEach(function(n){i.strokeStyle=t.stroke;i.beginPath();i.moveTo(n.xLineStart,n.y);i.lineTo(n.xLineEnd,n.y);i.stroke();var u=8;i.fillText(n.tick,n.xText,Math.max(u,Math.min(r.canvas.height-u,n.y)))})},t.prototype.drawHorizontalGridLines=function(n,t){var r=this,i=this.context;i.strokeStyle="lightgray";i.lineWidth=t.majorTickThickness;n.forEach(function(n){n.isGridLineVisible&&(i.beginPath(),i.moveTo(n.xGridLineStart,n.y),i.lineTo(n.xGridLineEnd,n.y),i.stroke())})},t.prototype.drawVerticalGridLines=function(){var t=this.context,i=n.Common.axis.ticksInfo,r=this.canvas.height;t.strokeStyle="lightgray";i.forEach(function(n){var i=n.position;t.beginPath();t.moveTo(i,0);t.lineTo(i,r);t.stroke()})},t.prototype.updateCanvasHeight=function(){$("#timeSeries").height($("#timeSeriesContainer").height()-36);this.canvas.height=$("#timeSeries").height();this.canvas.width=$("#timeSeries").width()},t.prototype.clearLegend=function(n){var t=n==="left"?$("#leftLegend"):$("#rightLegend"),i=n==="left"?$("#leftLegendList"):$("#rightLegendList");i.empty();t.hide()},t.prototype.addLegendRecord=function(n,t,i){var o=n==="left"?$("#leftLegendList"):$("#rightLegendList"),e=n==="left"?$("#leftLegend"):$("#rightLegend"),r,f,u;e.show();r=$("<li><\/li>");f=$("<div><\/div>").addClass("tsc-legend-indicator");f.css("background-color",t);u=$("<div><\/div>").addClass("tsc-legend-description");u.css("max-width",parseFloat(e.css("max-width"))-24);u.text(i);f.appendTo(r);u.appendTo(r);r.height(24).appendTo(o)},t.prototype.checkLegendVisibility=function(n){var t=24;return n>=t+30&&this.canvas.height>=t+10},t}();t.LineChart=i})(n.UI||(n.UI={}));var t=n.UI})(CZ||(CZ={}));
/*
//# sourceMappingURL=timeseries-graph-form.min.js.map
*/