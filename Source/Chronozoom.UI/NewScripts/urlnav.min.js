var CZ;(function(n){(function(t){function u(n,t){for(var i="",u=n;n;)n.type&&(i="/"+n.id+i),n=n.parent;if(i&&i!==""&&t){var e=(t.visible.centerX-(u.x+u.width/2))/u.width,o=(t.visible.centerY-(u.y+u.height/2))/u.height,s=t.widthScreenToVirtual(t.width)/u.width,h=t.heightScreenToVirtual(t.height)/u.height,f=r();i+="@x="+e+"&y="+o+"&w="+s+"&h="+h,typeof f.hash.params!="undefined"&&(typeof f.hash.params.tour!="undefined"&&(i+="&tour="+f.hash.params.tour),typeof f.hash.params.bookmark!="undefined"&&(i+="&bookmark="+f.hash.params.bookmark))}return i}function i(t,i){var f,r,e,u,o;if(!t)return null;try{if(f=t.indexOf("@"),f>=0&&(t=t.substr(0,f)),r=t.split("/"),r.length<=1)return null;for(e=function(t,i){var u,f,r,o;if(typeof i.type!="undefined"&&i.type==="infodot")return n.VCContent.getContentItem(i,t);if(!i.children||i.children.length==0)return null;for(u=!1,r=0;r<i.children.length;r++)if(f=i.children[r],u||f.type&&(u=!0),u&&f.id===t)return f;if(u)return null;for(r=0;r<i.children.length;r++)if(o=e(t,i.children[r]),o)return o;return null},u=1;u<r.length;u++)if(o=r[u],i=e(o,i),i==null)return null;return i}catch(s){return i}}function f(n,t){var o=n.indexOf("@"),c=1.05,l=1.05,a=0,v=0,y,f,u,e,r,b,k;if(o>=0){if(o==0)return null;for(y=n.substr(o+1),n=n.substr(0,o),f=y.split("&"),u=0;u<f.length;u++)e=f[u].substring(0,2),e=="x="?a=parseFloat(f[u].substring(2)):e=="y="?v=parseFloat(f[u].substring(2)):e=="w="?c=parseFloat(f[u].substring(2)):e=="h="&&(l=parseFloat(f[u].substring(2)))}if(r=i(n,t.virtualCanvas("getLayerContent")),!r)return null;var s=t.virtualCanvas("getViewport"),d=r.x+r.width/2+a*r.width,g=r.y+r.height/2+v*r.height,h=c*r.width,p=l*r.height,w=s.width/s.height,nt=h/p;return w>nt&&(h=w*p),b=h/s.width,k={centerX:d,centerY:g,scale:b},k}function r(){var n,o=document.location.toString().split("#"),h=o[0],s=o[1],c=new RegExp("^(https|http)://([a-z_0-9-.]{4,})(?::([0-9]{1,5}))?(?:/*)([a-z-_0-9/.]*)[?]?([a-z-_0-9=&]*)$","i"),i=h.match(c),f,u,e,t,r;if(i!=null){if(n={protocol:i[1],host:i[2],port:i[3]},i[4]!=""&&(n.path=i[4].split("/"),n.path.length>1&&(n.superCollectionName=n.path[0]),n.path.length>2&&(n.collectionName=n.path[1])),i[5]!="")for(n.params=[],f=i[5].split("&"),t=0;t<f.length;t++)r=f[t].split("="),n.params[r[0]]=r[1]}else window.location.href="testFallBackPage.htm";if(n.hash={params:[],path:""},typeof s!="undefined"&&(u=s.split("@"),n.hash={path:u[0]},u.length>1&&u[1]!=""))for(e=new String(u[1]).split("&"),n.hash.params=[],t=0;t<e.length;t++)r=e[t].split("="),n.hash.params[r[0]]=r[1];return n}function e(n,t){var u,f,r,e,i,o;t=t==null?!1:!0,n==null&&(window.location.href="testFallBackPage.htm"),u=n.protocol+"://"+n.host+(n.port!=""?":"+n.port:"")+"/"+(n.path===undefined?"":n.path.join("/")),f=[];for(i in n.params)f.push(i+"="+n.params[i]);u+=n.params!=null?"?"+f.join("&"):"",r=n.hash.path,e=[];for(i in n.hash.params)e.push(i+"="+n.hash.params[i]);r+="@"+e.join("&"),o=u+"#"+r,t==!0?window.location.href=o:window.location.hash=r}t.navigationAnchor=null,t.vcelementToNavString=u,t.navStringTovcElement=i,t.navStringToVisible=f,t.getURL=r,t.setURL=e})(n.UrlNav||(n.UrlNav={}));var t=n.UrlNav})(CZ||(CZ={}))