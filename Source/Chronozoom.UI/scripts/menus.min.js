jQuery.fn.extend({clicktouch:function(n){return this.each(function(){var t;t="ontouchstart"in window?"touchstart":"onpointerdown"in window?"pointerdown":"onmspointerdown"in window?"mspointerdown":"click";Boolean(window.chrome)&&navigator.platform.indexOf("Win32")>-1&&(t="click");$(this).on(t,n)})}});var CZ;(function(n){(function(t){function i(){$("#btnToggleSignedIn").attr("data-active",t.isSignedIn);$("#btnToggleEditor").attr("data-active",t.isEditor);$("#btnToggleDisable").attr("data-active",t.isDisabled);$("#btnToggleHide").attr("data-active",t.isHidden);t.isHidden?$("#mnu").hide():$("#mnu").show();t.isDisabled?$("#mnu").removeClass("disabled").addClass("disabled"):$("#mnu").removeClass("disabled");t.isSignedIn?$("#mnuProfile").attr("title","My Profile / Sign Out").find("img").attr("src","/images/profile-icon-green.png"):$("#mnuProfile").attr("title","Register / Sign In").find("img").attr("src","/images/profile-icon.png");t.isEditor?$("#mnuCurate").show():$("#mnuCurate").hide()}t.isSignedIn=!1;t.isEditor=!1;t.isDisabled=!1;t.isHidden=!1;t.Refresh=i;$(document).ready(function(){var r=250,i="fast";$("#mnu").children("li").mouseenter(function(){$(this).hasClass("active")&&!$("#mnu").hasClass("disabled")&&$(this).children("ul").slideDown(r)}).mouseleave(function(){$(this).children("ul").slideUp(i)}).on("touchstart",function(){$(this).children("ul").length===1&&($(this).children("ul").is(":visible")?$(this).trigger("mouseleave"):$(this).trigger("mouseenter"))}).children("ul").children("li").clicktouch(function(n){n.stopPropagation();$(this).children().hasClass("chevron")?$(this).hasClass("active")?($(this).children(".chevron").html("&#9654;"),$(this).removeClass("active").children("ul").slideUp(i)):($(this).children(".chevron").html("&#9698;"),$(this).addClass("active").children("ul").slideDown(r)):$(this).parent().slideUp(i)}).children("ul").children("li").clicktouch(function(n){n.stopPropagation();$(this).parent().parent().parent().slideUp(i)});$("#mnuViewTours").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.panelShowToursList(!1)});$("#mnuViewSeries").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.panelToggleTimeSeries()});$("#mnuCurate").hide().clicktouch(function(){t.isDisabled||(t.isSignedIn?t.isEditor||n.Authoring.showMessageWindow("Sorry, you do not have edit rights to this collection.","Unable to Curate"):n.HomePageViewModel.panelToggleLogin())});$("#mnuCreateCollection").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();AddCollection()});$("#mnuCreateTimeline").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();n.Overlay.Hide();n.Authoring.UI.createTimeline()});$("#mnuCreateExhibit").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();n.Overlay.Hide();n.Authoring.UI.createExhibit()});$("#mnuCreateTour").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();n.Overlay.Hide();n.Authoring.UI.createTour()});$("#mnuExportAbout").clicktouch(function(n){n.stopPropagation();ExportInformation()});$("#mnuEditTours").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.panelShowToursList(!0)});$("#mnuExportCollection").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();ExportCollection()});$("#mnuImportCollection").clicktouch(function(t){t.stopPropagation();n.HomePageViewModel.closeAllForms();$("#mnuFileJSON").data("mnuItem","#mnuImportCollection").val("").trigger("click")});$("#mnuMine").clicktouch(function(){t.isDisabled||(t.isSignedIn?n.Overlay.Show(!0):(sessionStorage.setItem("showMyCollections","requested"),n.HomePageViewModel.panelToggleLogin()))});$("#mnuSearch").clicktouch(function(){t.isDisabled||n.HomePageViewModel.panelToggleSearch()});$("#mnuProfile").clicktouch(function(){t.isDisabled||(t.isSignedIn?n.HomePageViewModel.panelToggleProfile():n.HomePageViewModel.panelToggleLogin())});$("#mnuFileJSON").on("input, change",function(){if(this.value!==""&&!(this.files.length<1)){var i,t=new FileReader;t.onload=function(){try{i=$.parseJSON(t.result)}catch(r){n.Authoring.showMessageWindow("This file is not a valid .json file.","Invalid File Format");return}switch($("#mnuFileJSON").data("mnuItem")){case"#mnuImportCollection":ImportCollection(t.result)}};t.readAsText(this.files[0],"utf8")}})});this.AddCollection=function(){var t,i;if(n.Authoring.hideMessageWindow(),t=prompt("What name would you like for your new collection?\nNote: The name must be unique among your collections.","")||"",t=$.trim(t),i=t.replace(/[^a-zA-Z0-9\-]/g,""),i!==""){if(i.length>50){n.Authoring.showMessageWindow("The name of your new collection must be no more than 50 characters in length.","Unable to Create Collection");return}n.Service.getCollection().done(function(r){n.Service.isUniqueCollectionName(t).done(function(u){if(!u||i===r.Path){n.Authoring.showMessageWindow("Sorry your new collection name is not unique enough. Please try a different name.","Unable to Create Collection");return}n.Service.postCollection(i,{Title:t}).done(function(t){t?window.location=(window.location.protocol+"//"+window.location.host+"/"+n.Service.superCollectionName+"/"+i).toLowerCase():n.Authoring.showMessageWindow("An unexpected error occured.","Unable to Create Collection")})})})}};this.ExportInformation=function(){n.Authoring.showMessageWindow("Exporting a collection lets you save an entire collection to a file on your PC, which you can keep as a backup or share with others. The collection's name, background, colors, timelines, exhibits, content items and tours are all included. If you've granted edit rights to other people, please note that the list of editors is not included. When you import a previously exported collection, it will always be imported as a new unpublished collection, which you can then edit and publish when you are ready.","Exporting & Importing Collections")};this.ExportCollection=function(){var t=n.Service.getRootTimelineId(),i=n.Service.getCollection(),r=n.Service.getTours();$.when(t,i,r).done(function(t,i,r){n.Service.exportTimelines(t[0]).done(function(t){var f={date:(new Date).toUTCString(),schema:constants.schemaVersion,collection:{Title:i[0].Title,theme:i[0].theme},timelines:t,tours:r[0].d},e=new Blob([JSON.stringify(f)],{type:"application/json;charset=utf-8"}),u="cz."+i[0].Path+".json";saveAs(e,u);n.Authoring.showMessageWindow('The current collection has been provided to you as a file, which you can retain as a back-up, or share with others. If you are not prompted to pick a file name, please check your downloads for a file called: "'+u+'".',"Collection Successfully Exported")}).fail(function(){n.Authoring.showMessageWindow("Sorry, we were unable to export this collection.","Unable to Export Collection")})}).fail(function(){n.Authoring.showMessageWindow("An unexpected error occured. Please feel free to try again.","Unable to Export Collection")})};this.ImportCollection=function(t){n.Service.importCollection(t).then(function(t){n.Authoring.showMessageWindow(t)})}})(n.Menus||(n.Menus={}));var t=n.Menus})(CZ||(CZ={}));
//# sourceMappingURL=menus.min.js.map
